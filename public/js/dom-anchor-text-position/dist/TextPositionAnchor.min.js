!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","node-iterator-shim","dom-seek"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("node-iterator-shim"),require("dom-seek"));else{var r={exports:{}};t(r.exports,r,e.createNodeIterator,e.seek),e.TextPositionAnchor=r.exports}}(this,function(e,t,r,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){if(e.nodeType===Node.TEXT_NODE)return e;var t=e.ownerDocument,r=t.createTreeWalker(e,f,null,!1);return r.firstChild()}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=o(r),u=o(n),f=NodeFilter.SHOW_TEXT,l=function(){function e(t,r,n){if(i(this,e),void 0===t)throw new Error('missing required parameter "root"');if(void 0===r)throw new Error('missing required parameter "start"');if(void 0===n)throw new Error('missing required parameter "end"');this.root=t,this.start=r,this.end=n}return a(e,[{key:"toRange",value:function(){var e=this.root,t=e.ownerDocument,r=t.createRange(),n=s["default"](e,f),o=this.start,i=this.end,d=u["default"](n,o),a=o-d;n.pointerBeforeReferenceNode?r.setStart(n.referenceNode,a):(r.setStart(n.nextNode(),a),n.previousNode());var l=i-o+a;return d=u["default"](n,l),a=l-d,n.pointerBeforeReferenceNode?r.setEnd(n.referenceNode,a):r.setEnd(n.nextNode(),a),r}},{key:"toSelector",value:function(){return{type:"TextPositionSelector",start:this.start,end:this.end}}}],[{key:"fromRange",value:function(t,r){if(void 0===t)throw new Error('missing required parameter "root"');if(void 0===r)throw new Error('missing required parameter "range"');var n=r.startContainer,o=r.startOffset;n.nodeType!==Node.TEXT_NODE&&(o===n.childNodes.length?(n=n.childNodes[o-1],n=d(n),o=n.textContent.length):(n=n.childNodes[o],n=d(n),o=0));var i=r.endContainer,a=r.endOffset;i.nodeType!==Node.TEXT_NODE&&(a===i.childNodes.length?(i=i.childNodes[a-1],i=d(i),a=i.textContent.length):(i=i.childNodes[a],i=d(i),a=0));var l=s["default"](t,f),c=u["default"](l,n),h=c+u["default"](l,i);return new e(t,c+o,h+a)}},{key:"fromSelector",value:function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new e(t,r.start,r.end)}}]),e}();t.exports=l});
//# sourceMappingURL=TextPositionAnchor.min.js.map